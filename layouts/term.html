{{ define "main" }}
  <!-- 面包屑导航 -->
  {{ partial "navigation/breadcrumb.html" . }}


  <!-- 页面标题和描述 -->
  <header class="mb-8">
    <div class="mb-4 flex items-center gap-3">
      {{ if eq .Data.Singular "tag" }}
        {{ partial "features/icon.html" (dict "name" "tag" "size" "lg" "ariaLabel" "") }}
      {{ else if eq .Data.Singular "category" }}
        {{ partial "features/icon.html" (dict "name" "folder" "size" "lg" "ariaLabel" "") }}
      {{ else }}
        {{ partial "features/icon.html" (dict "name" "bookmark" "size" "lg" "ariaLabel" "") }}
      {{ end }}
      <h1 class="text-foreground text-3xl font-bold">
        {{ .Title }}
      </h1>
    </div>

    {{ if .Content }}
      <div class="prose prose-neutral dark:prose-invert mb-6 max-w-none">
        {{ .Content }}
      </div>
    {{ else }}
      <p class="text-muted-foreground mb-6">
        {{ if eq .Data.Singular "tag" }}
          {{ printf "All posts under tag \"%s\"" .Title }}
        {{ else if eq .Data.Singular "category" }}
          {{ printf "All posts under category \"%s\"" .Title }}
        {{ else }}
          {{ printf "All posts under \"%s\"" .Title }}
        {{ end }}
      </p>
    {{ end }}


    <!-- 统计信息 -->
    <div class="text-muted-foreground flex items-center gap-4 text-sm">
      <div class="flex items-center gap-1">
        {{ partial "features/icon.html" (dict "name" "file-text" "size" "sm" "ariaLabel" "") }}
        <span
          >{{ printf "%d posts total" (len .Pages) }}</span
        >
      </div>
      <div class="flex items-center gap-1">
        {{ partial "features/icon.html" (dict "name" "calendar" "size" "sm" "ariaLabel" "") }}
        <span>Sorted by date</span>
      </div>
    </div>
  </header>

  <!-- 文章列表 -->
  {{ $posts := .Pages }}
  {{ if $posts }}
    {{ partial "content/post-list.html" (dict "posts" $posts) }}
  {{ else }}
    <!-- 空状态 -->
    <div class="py-16 text-center">
      <div
        class="bg-muted/50 mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full">
        {{ partial "features/icon.html" (dict "name" "file-text" "size" "xl" "ariaLabel" "") }}
      </div>
      <h2 class="text-foreground mb-3 text-xl font-medium">
        No posts yet
      </h2>
      <p class="text-muted-foreground mb-6">
        {{ if eq .Data.Singular "tag" }}
          No posts under this tag yet.
        {{ else if eq .Data.Singular "category" }}
          No posts under this category yet.
        {{ else }}
          No posts under this category yet.
        {{ end }}
      </p>
      <a
        href="{{ "/" | relURL }}"
        class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center gap-2 rounded-xl px-6 py-3 font-medium transition-colors duration-300">
        {{ partial "features/icon.html" (dict "name" "home" "size" "sm" "ariaLabel" "") }}
        <span>Back to Home</span>
      </a>
    </div>
  {{ end }}

{{ end }}
