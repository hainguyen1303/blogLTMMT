<!-- æœç´¢æ¨¡æ€æ¡†é®ç½©å±‚ -->
<div
  id="search-overlay"
  class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 transition-opacity duration-300"></div>

<!-- æœç´¢æ¨¡æ€æ¡† -->
<div
  id="search-modal"
  class="bg-card border-border pointer-events-none fixed top-1/2 left-1/2 z-50 max-h-[80vh] w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 scale-95 transform overflow-hidden rounded-xl border opacity-0 shadow-xl transition-all duration-300">
  <!-- æœç´¢å¤´éƒ¨ -->
  <div class="border-border flex items-center gap-3 border-b p-4">
    <!-- æœç´¢å›¾æ ‡ -->
    <div class="text-muted-foreground h-5 w-5 flex-shrink-0">
      {{ partial "features/icon.html" (dict "name" "search" "size" "sm" "ariaLabel" "") }}
    </div>

    <!-- è¾“å…¥æ¡†å®¹å™¨ -->
    <div class="relative flex-1">
      <!-- æ¸…ç©ºæŒ‰é’® - åœ¨è¾“å…¥æ¡†å·¦ä¾§ -->
      <button
        id="search-clear"
        class="text-muted-foreground hover:text-foreground hover:bg-muted/50 pointer-events-none absolute top-1/2 left-0 z-10 h-5 w-5 -translate-y-1/2 rounded opacity-0 transition-all duration-200"
        title="Clear"
        aria-label="Clear">
        {{ partial "features/icon.html" (dict "name" "close" "size" "sm" "ariaLabel" "") }}
      </button>

      <!-- æœç´¢è¾“å…¥æ¡† -->
      <input
        id="search-input"
        type="text"
        placeholder="Search posts..."
        class="text-foreground placeholder:text-muted-foreground w-full border-none bg-transparent pl-8 text-lg outline-none"
        autocomplete="off"
        spellcheck="false" />
    </div>

    <!-- å…³é—­æŒ‰é’® -->
    <button
      id="search-close"
      class="text-muted-foreground hover:text-foreground hover:bg-muted/50 flex h-6 w-6 items-center justify-center rounded-md p-0.5 transition-all duration-200"
      title="Close"
      aria-label="Close">
      {{ partial "features/icon.html" (dict "name" "close" "size" "sm" "ariaLabel" "") }}
    </button>
  </div>

  <!-- æœç´¢ç»“æžœåŒºåŸŸ -->
  <div id="search-results" class="max-h-96 overflow-y-auto">
    <!-- ç©ºçŠ¶æ€ -->
    <div
      id="search-empty"
      class="flex flex-col items-center justify-center py-12 text-center">
      <div
        class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full">
        {{ partial "features/icon.html" (dict "name" "search" "size" "lg" "ariaLabel" "") }}
      </div>
      <h3 class="text-foreground mb-2 text-lg font-semibold">
        Start searching
      </h3>
      <p class="text-muted-foreground text-sm">
        Enter keywords to search articles
      </p>
    </div>

    <!-- åŠ è½½çŠ¶æ€ -->
    <div
      id="search-loading"
      class="flex hidden items-center justify-center py-8">
      <div
        class="mr-3 h-6 w-6 animate-spin rounded-full border-2 border-current border-t-transparent"></div>
      <span class="text-muted-foreground"
        >Searching...</span
      >
    </div>

    <!-- æ— ç»“æžœçŠ¶æ€ -->
    <div
      id="search-no-results"
      class="flex hidden flex-col items-center justify-center py-12 text-center">
      <div
        class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full">
        {{ partial "features/icon.html" (dict "name" "text" "size" "lg" "ariaLabel" "") }}
      </div>
      <h3 class="text-foreground mb-2 text-lg font-semibold">
        No results found
      </h3>
      <p class="text-muted-foreground text-sm">
        Try using different keywords
      </p>
    </div>

    <!-- æœç´¢ç»“æžœåˆ—è¡¨ -->
    <div id="search-results-list" class="hidden">
      <!-- ç»“æžœç»Ÿè®¡ -->
      <div
        id="search-stats"
        class="text-muted-foreground border-border border-b px-4 py-3 text-sm"
        data-template="Found %d results">
      </div>

      <!-- ç»“æžœé¡¹å®¹å™¨ -->
      <div id="search-items" class="divide-border divide-y">
        <!-- åŠ¨æ€ç”Ÿæˆæœç´¢ç»“æžœ -->
      </div>
    </div>
  </div>

  <!-- æœç´¢åº•éƒ¨æç¤º -->
  <div class="border-border bg-muted/20 border-t px-4 py-3">
    <div
      class="text-muted-foreground flex items-center justify-between text-xs">
      <div class="flex items-center gap-2 md:gap-4">
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >â†‘â†“</kbd
          >
          <span class="hidden sm:inline"
            >Navigate</span
          >
        </div>
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >â†µ</kbd
          >
          <span class="hidden sm:inline"
            >Select</span
          >
        </div>
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >ESC</kbd
          >
          <span class="hidden sm:inline"
            >Close</span
          >
        </div>
      </div>
      <div class="search-hint-desktop flex items-center gap-1">
        <kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
          >âŒ˜K</kbd
        >
        <span>Shortcut</span>
      </div>
    </div>
  </div>
</div>
