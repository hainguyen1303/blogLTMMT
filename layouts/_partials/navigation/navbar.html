{{ $defaultMenus := slice
  (dict "Name" "Posts" "URL" "/posts/" "Params" (dict "icon" "posts"))
  (dict "Name" "About" "URL" "/about/" "Params" (dict "icon" "user"))
  (dict "Name" "Tags" "URL" "/tags/" "Params" (dict "icon" "tags"))
  (dict "Name" "Archives" "URL" "/archives/" "Params" (dict "icon" "archive"))
}}
{{ $menus := site.Menus.main }}
{{ if or (not $menus) (eq (len $menus) 0) }}
  {{ $menus = $defaultMenus }}
{{ end }}

<nav class="mx-8 flex flex-1 items-center justify-center">
  <div class="flex items-center space-x-1">
    {{ $currentPage := . }}
    {{ range $menus }}
      {{ $menuURL := .URL | default "" }}
      {{ if .PageRef }}
        {{ with site.GetPage .PageRef }}
          {{ $menuURL = .RelPermalink }}
        {{ end }}
      {{ end }}
      {{ if and $menuURL (not (strings.HasPrefix $menuURL "http")) }}
        {{ $menuURL = $menuURL | relURL }}
      {{ end }}
      {{ $resolvedURL := $menuURL | default "/" }}
      {{ $isActive := eq $currentPage.RelPermalink $resolvedURL }}
      <a
        href="{{ $resolvedURL }}"
        class="nav-link {{ if $isActive }}
          nav-active-indicator bg-accent text-accent-foreground
        {{ else }}
          text-muted-foreground hover:text-primary hover:bg-primary/10
        {{ end }} focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">
        {{ if .Params.icon }}
          {{ partial "features/icon.html" (dict "name" .Params.icon "size" "md" "ariaLabel" .Name) }}
        {{ end }}
        <span>{{ .Name }}</span>
      </a>
    {{ end }}
  </div>
</nav>
